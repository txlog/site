# Txlog Agent

The **txlog** command is a tool for compiling and sending transaction data from
RPM-based systems to the Txlog server. It collects information about package
installations, updates, and removals, providing a comprehensive view of system
changes over time. This data can be used for monitoring, analytics, and
troubleshooting purposes. The agent operates by reading transaction logs
generated by package managers like `yum` or `dnf`, processing the information,
and then sending it to a specified Txlog server for storage and analysis. The
agent is designed to be lightweight and efficient, minimizing its impact on
system performance while ensuring accurate and timely data collection.

## System Requirements

The **txlog** agent requires

* a RHEL-compatible Linux workstation with the `dnf` or `yum` package manager
installed.
* a Txlog Server deployed in the network

## Installation

Add the RPM repository and install the agent.

```bash
sudo dnf localinstall -y https://rpm.rda.run/rpm-rda-run-1.0-1.noarch.rpm
sudo dnf install -y txlog
```

## Configuration

You need to set your Txlog Server address on `/etc/txlog.yaml` file.

Normally `txlog` uses sane defaults, but if you want to activate any option, go
to this file, uncomment the section and modify it. Useful during development,
since you can set another parameters for this environment.

::: code-group

```yaml [/etc/txlog.yaml]
agent:
  check_version: true
server:
  url: https://txlog-server.example.com
  username: bob_tables
  password: correct-horse-battery-staple
```
:::

## Agent section

* `check_version` (boolean, optional): Controls whether the agent checks for new
versions when running txlog version. When enabled, the agent will contact
<https://txlog.rda.run/agent/version> to verify if a new version is available.
Default: `true`

## Server section

* `url` (string): Specifies the URL of the txlog server where logs will be sent.
  Must include protocol (http/https) and port if not using defaults. Default:
  `http://localhost:8080`

* `username` (string, optional): Username for basic authentication with the
  txlog server. Must be uncommented to enable authentication. Default: `not set`

* `password` (string, optional): Password for basic authentication with the
  txlog server. Must be uncommented to enable authentication. Should be used in
  conjunction with username. Default: `not set`

## Basic commands

All available commands and options can be obtained calling `txlog` without
parameters, or on the manpage, using `man txlog` command.

```bash
Usage:
  txlog [command]

Available Commands:
  build        Compile transaction info
  help         Help about any command
  version      Show agent and server version number

Flags:
      --config string   config file (default is /etc/txlog.yaml)
  -h, --help            help for txlog

Use "txlog [command] --help" for more information about a command.
```
